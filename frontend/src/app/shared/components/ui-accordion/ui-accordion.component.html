<!-- File: d:\desarrollos\countries2\frontend\src\app\shared\components\ui-accordion\ui-accordion.component.html | Last Modified: 2025-10-19 -->

<div class="ui-accordion">
  @for (item of items; track item.id) {
    <div class="ui-accordion__item" [class.ui-accordion__item--expanded]="item.expanded">
      
      <!-- Cabecera del Item -->
      <button
        class="ui-accordion__header"
        (click)="toggleItem(item)"
        [disabled]="item.disabled"
        [attr.aria-expanded]="item.expanded"
        [attr.aria-controls]="'panel-' + item.id"
        [id]="'header-' + item.id"
      >
        <span class="ui-accordion__title">{{ item.title }}</span>
        <app-ui-icon class="ui-accordion__indicator" [uiIconName]="'icon-chevron'"></app-ui-icon>
      </button>

      <!-- Contenido del Item -->
      <div
        class="ui-accordion__content"
        role="region"
        [attr.aria-labelledby]="'header-' + item.id"
        [id]="'panel-' + item.id"
      >
        <div class="ui-accordion__content-inner">
          <!-- ✅ CORRECCIÓN: Se pasa el contexto de datos a la plantilla.
               Esto conecta la propiedad 'data' de cada AccordionItem con el 'let-data'
               de la ng-template en el componente del menú. -->
          <ng-container
            [ngTemplateOutlet]="item.content"
            [ngTemplateOutletContext]="{ $implicit: item.data }"
          ></ng-container>
        </div>
      </div>

    </div>
  }
</div>