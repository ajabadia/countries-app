<div class="countries-admin">
  <!-- Cabecera principal -->
  <header class="countries-header">
    <h1>Administración de países</h1>

    <!-- Botón para añadir país -->
    <button class="add-country-btn" (click)="onAddCountry()">Añadir país</button>
    <!-- Botón para borrar seleccionados -->
    <button
      class="delete-selected-btn"
      [disabled]="selectedCountries.length === 0"
      (click)="showConfirmDialog = true"
    >
      Borrar seleccionados
    </button>
    <!-- Botón para refrescar países -->
    <button class="refresh-btn" (click)="onRefresh()">Recargar</button>
    <!-- Input búsqueda robusto para Angular 17+, mantiene ngModel (será seguro si no hay pipes/aserciones en el TS) -->
    <input
      type="text"
      placeholder="Buscar país..."
      [(ngModel)]="searchTerm"
      (input)="onSearchChange(searchTerm)"
      class="search-input"
    />
  </header>

  <!-- Tabla de países: modular, con sorting y selección -->
<app-country-table
  [countries]="pagedCountries"
  [selectedCountries]="selectedCountries"
  [columns]="columns"
  [sortKey]="sortKey"
  [sortOrder]="sortOrder"
  (rowClick)="onEditCountry($event)"
  (selectionChange)="onSelectionChange($event)"
  (sortChange)="onSortChange($event)">
</app-country-table>


  <!-- Modal para edición/creación de país -->
  <country-modal
    [form]="countryForm"
    [visible]="showEditModal"
    [isEditMode]="isEditMode"
    (save)="onSaveCountry($event)"
    (close)="onCloseModal()">
  </country-modal>

  <!-- Diálogo de confirmación de borrado -->
  <app-confirm-dialog
    [visible]="showConfirmDialog"
    [title]="'Eliminar países'"
    [message]="'¿Seguro que quieres eliminar ' + selectedCountries.length + ' países seleccionados?'"
    [data]="selectedCountries"
    (confirm)="onConfirmDelete()"
    (cancel)="onCancelDelete()"
  ></app-confirm-dialog>

