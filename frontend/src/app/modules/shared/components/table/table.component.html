<div class="table-container">
  <table class="table">
    <thead>
      <tr>
        @for (column of columns; track column.key) {
          <th 
            [style.width]="column.width" 
            [style.min-width]="column.minWidth"
            [class.sortable]="column.sortable"
            (click)="column.sortable && onSort(column.key)">
            {{ column.label }}
            @if (column.sortable) {
              <app-ui-icon 
                class="sort-icon"
                [icon]="sortKey === column.key ? (sortOrder === 'asc' ? 'arrow-up' : 'arrow-down') : 'arrows-up-down'" />
            }
          </th>
        }
        <!-- Cabecera para la columna de acciones -->
        <th class="actions-header">Acciones</th>
      </tr>
    </thead>
    <tbody>
      @if (items.length === 0) {
        <tr><td [attr.colspan]="columns.length + 1" class="no-data-cell">No hay datos para mostrar.</td></tr>
      } @else {
        @for (item of items; track item.id) {
          <tr>
            @for (column of columns; track column.key) {
              <td>
                <ng-container [ngSwitch]="column.cellType || 'text'">
                  <!-- Puedes añadir más tipos de celda aquí -->
                  <span *ngSwitchCase="'text'">{{ getCellValue(item, column.key) }}</span>
                  <!-- Ejemplo para un futuro 'flag' cellType -->
                  <!-- <app-flag-icon *ngSwitchCase="'flag'" [countryCode]="getCellValue(item, column.key)" /> -->
                </ng-container>
              </td>
            }
            <td class="actions-cell">
              <button (click)="onAction('edit', item)" class="action-button"><app-ui-icon icon="pencil" /></button>
              <button (click)="onAction('delete', item)" class="action-button action-button--danger"><app-ui-icon icon="trash" /></button>
            </td>
          </tr>
        }
      }
    </tbody>
  </table>
</div>